<!DOCTYPE html>
<html lang="ko" xmlns:th="https://www.thymeleaf.org/">
    <head th:replace="~{/admin_config.html :: admin_config}"></head>
    <title>게시판 상세 - 관리자 페이지</title>
     <link rel="stylesheet" th:href="@{/css/admin/admin_Q&A_detail_waitingAnswer.css?v=1}">
    
    <body class="sb-nav-fixed">
        <!-- 상단 네비게이션 바 -->
        <nav th:replace="~{/admin_top.html :: admin_top}"></nav>
     
        <div id="layoutSidenav">
            <!-- 사이드바 -->
            <div th:replace="~{/admin_sidebar.html :: admin_sidebar}"> </div>
            
            <!-- 메인 컨텐츠 -->
            <div id="layoutSidenav_content">
                <div class="main-content">
                    <!-- 페이지 헤더 -->
                    <div class="page-header">
                        <h1 class="page-title">게시판 상세</h1>
                    </div>
                    <div class="title-divider"></div>
                    
                    <!-- 게시글 상세 섹션 -->
                    <div class="detail-section">
                        <div class="detail-header">
                            <div class="post-header-top">
                                <h2 class="post-title">심리상담 신청 관련 문의</h2>
                                <span class="status-badge status-public">공개</span>
                            </div>
                            <div class="post-meta">
                                <div class="post-meta-item">
                                    <span class="label">작성자</span>
                                    <span>202*****</span>
                                </div>
                                <div class="post-meta-item">
                                    <span class="label">분류</span>
                                    <span class="category-badge category-counseling">상담</span>
                                </div>
                                <div class="post-meta-item">
                                    <span class="label">등록일</span>
                                    <span>2025.06.15</span>
                                </div>
                                <div class="post-meta-item">
                                    <span class="label">조회수</span>
                                    <span>15</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="post-content-wrapper">
                            <div class="post-content">
                                안녕하세요. 상담 예약과 관련하여 문의드립니다.<br><br>
                                
                                처음 상담을 받아보려고 하는데, 예약 방법을 자세히 알고 싶습니다.<br><br>
                                
                                1. 온라인으로 예약이 가능한지 궁금합니다.<br>
                                2. 전화로도 예약할 수 있는지 알고 싶습니다.<br>
                                3. 예약 가능한 시간대는 어떻게 되는지 문의드립니다.<br>
                                4. 상담 종류별로 예약 방법이 다른지 궁금합니다.<br><br>
                                
                                자세한 안내 부탁드립니다. 감사합니다.
                            </div>
                            
                            <div class="attachment-section">
                                <div class="attachment-label">첨부파일</div>
                                <span style="color: #6c757d; font-size: 0.9rem;">첨부된 파일이 없습니다.</span>
                            </div>
                        </div>
                    </div>

                    <!-- 답변 작성 섹션 -->
                    <div class="answer-form-section">
                        <div class="answer-form-header">
                            <h3 class="answer-form-title">답변 작성</h3>
                        </div>
                        
                        <div class="answer-form-wrapper">
                            <form id="answerForm">
                                <div class="form-group">
                                    <label class="form-label">답변자</label>
                                    <input type="text" class="form-input" value="관리자" readonly>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">답변내용</label>
                                    <textarea class="form-textarea" id="answerContent" placeholder="답변 내용을 입력해주세요..."></textarea>
                                </div>
                                
                                <div class="answer-actions">
                                    <button type="submit" class="btn-answer">
                                        <i class="fas fa-paper-plane"></i>
                                        답변등록
                                    </button>
                                    <button type="button" class="btn-cancel" onclick="clearAnswer()">
                                        <i class="fas fa-times"></i>
                                        취소
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- 하단 버튼 영역 -->
                    <div class="bottom-actions">
                        <button class="btn-status-toggle" onclick="togglePostStatus()">
                            <i class="fas fa-eye-slash"></i>
                            비공개 전환
                        </button>
                        <a href="#" class="btn-list" onclick="goBack()">
                            <i class="fas fa-list"></i>
                            목록
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
        <script>
            // 사이드바 토글 기능
            document.getElementById('sidebarToggle').addEventListener('click', function() {
                const sidebar = document.getElementById('layoutSidenav_nav');
                const content = document.getElementById('layoutSidenav_content');
                
                if (window.innerWidth <= 768) {
                    sidebar.classList.toggle('show');
                } else {
                    sidebar.classList.toggle('collapsed');
                    content.classList.toggle('expanded');
                }
            });

            // 윈도우 리사이즈 시 클래스 정리
            window.addEventListener('resize', function() {
                const sidebar = document.getElementById('layoutSidenav_nav');
                const content = document.getElementById('layoutSidenav_content');
                
                if (window.innerWidth > 768) {
                    sidebar.classList.remove('show');
                } else {
                    sidebar.classList.remove('collapsed');
                    content.classList.remove('expanded');
                }
            });

            // 답변 폼 제출
            document.getElementById('answerForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const answerContent = document.getElementById('answerContent').value.trim();
                
                if (!answerContent) {
                    alert('답변 내용을 입력해주세요.');
                    return;
                }
                
                if (confirm('답변을 등록하시겠습니까?')) {
                    alert('답변이 등록되었습니다.');
                    // 실제로는 서버로 데이터 전송
                    // 답변 등록 후 목록으로 이동하거나 페이지 새로고침
                }
            });

            // 답변 취소
            function clearAnswer() {
                if (confirm('작성 중인 답변을 취소하시겠습니까?')) {
                    document.getElementById('answerContent').value = '';
                }
            }

            // 목록으로 돌아가기
            function goBack() {
                alert('문의게시판 목록으로 돌아갑니다.');
                // window.history.back(); 또는 특정 URL로 이동
                // window.location.href = 'inquiry-management.html';
            }

            // 게시물 상태 전환
            function togglePostStatus() {
                const statusBadge = document.querySelector('.status-badge');
                const toggleBtn = document.querySelector('.btn-status-toggle');
                const isCurrentlyPublic = statusBadge.classList.contains('status-public');
                
                if (isCurrentlyPublic) {
                    if (confirm('이 게시물을 비공개로 전환하시겠습니까?\n비공개 전환 시 학생에게 보이지 않습니다.')) {
                        // 비공개로 전환
                        statusBadge.textContent = '비공개';
                        statusBadge.className = 'status-badge status-private';
                        toggleBtn.innerHTML = '<i class="fas fa-eye"></i> 공개 전환';
                        toggleBtn.className = 'btn-status-toggle public';
                        alert('게시물이 비공개로 전환되었습니다.');
                    }
                } else {
                    if (confirm('이 게시물을 공개로 전환하시겠습니까?')) {
                        // 공개로 전환
                        statusBadge.textContent = '공개';
                        statusBadge.className = 'status-badge status-public';
                        toggleBtn.innerHTML = '<i class="fas fa-eye-slash"></i> 비공개 전환';
                        toggleBtn.className = 'btn-status-toggle';
                        alert('게시물이 공개로 전환되었습니다.');
                    }
                }
            }
        </script>
    </body>
</html>